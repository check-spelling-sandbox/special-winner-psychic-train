

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">

      <meta charset="utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
      <title>5.1.&nbsp;Upgrade planning - Chapter&nbsp;5.&nbsp;Upgrade</title>
      <link rel="stylesheet" type="text/css" href="../../docbook.css"></link>
      <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"></link>
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css"></link>
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,300italic"></link>
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/codemirror.min.css"></link>
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/theme/neo.min.css"></link>
      <link rel="stylesheet" type="text/css" href="../../css/extra.css"></link>
      <link rel="stylesheet" type="text/css" href="../../css/chunked-base.css"></link><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/codemirror.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/addon/runmode/runmode.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/mode/javascript/javascript.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/mode/shell/shell.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/mode/powershell/powershell.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/mode/python/python.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/mode/xml/xml.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/mode/clike/clike.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/mode/cypher/cypher.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/mode/properties/properties.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/mode/groovy/groovy.min.js" type="text/javascript"></script><script src="../../javascript/colorize.js" type="text/javascript"></script><script src="../../javascript/tabs-for-chunked.js" type="text/javascript"></script><script src="../../javascript/mp-nav.js" type="text/javascript"></script><script src="../../javascript/versionswitcher.js" type="text/javascript"></script><script src="../../javascript/version.js" type="text/javascript"></script><script src="https://s3-eu-west-1.amazonaws.com/alpha.neohq.net/docs/new-manual/assets/search.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"></meta>
      <meta name="description" content="This section describes how to plan for an upgrade of Neo4j."></meta>
      <link rel="prev" href="../../upgrade/" title="Chapter 5. Upgrade"></link>
      <link rel="next" href="../../upgrade/deployment-upgrading/" title="5.2. Upgrade a single instance"></link>
      <link rel="shortcut icon" href="../../wp-content/themes/neo4jweb/favicon.ico"></link><script>
        $(document).ready(function() {
          CodeMirror.colorize();
          tabTheSource($('body'));
          var $header = $('header').first();
          $header.prepend(
            $('<a href="../../" id="logo"><img src="../../wp-content/themes/neo4jweb/assets/images/neo4j-logo-2015.png" alt="Neo4j Logo"></img></a>')
          );
          var $sidebar = $('<div id="sidebar-wrapper"></div>');
          $.get('toc.html', function (d){
            $(d).appendTo($sidebar);
            highlightToc();
            highlightLibraryHeader();
          });
          $sidebar.insertAfter($('header').first());
        });
        </script></head>
 
      <header>
         <div class="searchbox">
            <form id="search-form" class="search" name="search-form" role="search"><input id="search-form-input" name="q" title="search" type="search" lang="en" placeholder="Search Neo4j docs..." aria-label="Search Neo4j documentation" max-length="128" required="required"></input><input id="search-form-button" type="submit" value="Search"></input></form>
         </div>
         <ul class="documentation-library">
            <li><a href="../../">Operations Manual</a></li>
            <li><a href="../../docs/developer-manual/3.4/">Developer Manual</a></li>
            <li><a href="../../docs/ogm-manual/3.0/">OGM Manual</a></li>
            <li><a href="../../docs/graph-algorithms/3.4/">Graph Algorithms</a></li>
            <li><a href="../../docs/java-reference/3.4/">Java Reference</a></li>
         </ul>
         <nav id="header-nav"><span class="nav-previous"><a accesskey="p" href="../../upgrade/"><span class="fa fa-long-arrow-left" aria-hidden="true"></span>Upgrade</a></span><span class="nav-current">
               <p class="nav-title hidden">5.1.&nbsp;Upgrade planning</p></span><span class="nav-next"><a accesskey="n" href="../../upgrade/deployment-upgrading/">Upgrade a single instance<span class="fa fa-long-arrow-right" aria-hidden="true"></span></a></span></nav>
      </header>
      <div id="search-results" class="hidden"></div>
      <section class="section" id="upgrade-planning">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a class="anchor" href="#upgrade-planning"></a>5.1.&nbsp;Upgrade planning
                  </h2>
               </div>
            </div>
         </div>
         <div class="abstract">
            <p>This section describes how to plan for an upgrade of Neo4j.</p>
         </div>
         <p>Plan your upgrade by following the steps in this chapter.</p>
         <section class="section" id="supported-upgrade-paths">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#supported-upgrade-paths"></a>5.1.1.&nbsp;Supported upgrade paths
                     </h3>
                  </div>
               </div>
            </div>
            <p>The following upgrade paths are supported:</p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">3.2.latest &#8594; 3.4.17</li>
                  <li class="listitem">3.3.latest &#8594; 3.4.17</li>
                  <li class="listitem">3.4.any &#8594; 3.4.17</li>
               </ul>
            </div>
            <p>The following steps are required if you need to upgrade from a version earlier than 3.2:</p>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">Upgrade to version 3.2.latest by following the instructions in the manual for that version.</li>
                  <li class="listitem">Upgrade to version 3.4.17 as per instructions in this manual.</li>
               </ol>
            </div>
            <p><span class="strong"><strong>Limitations</strong></span></p>
            <p>A Neo4j upgrade must be performed as an isolated operation.
               If you have other changes planned, such as switching from a single-instance installation to a Causal Cluster, you must action
               these separately.
            </p>
         </section>
         <section class="section" id="upgrade-prepare">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#upgrade-prepare"></a>5.1.2.&nbsp;Prepare to upgrade
                     </h3>
                  </div>
               </div>
            </div>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p class="simpara">Review supported upgrade paths.</p>
                     <p class="simpara">Before upgrading to a new major or minor release, the database must first be upgraded to the latest version within the relevant
                        release.
                        The latest version is available at this page: <a class="link" href="https://web.archive.org/web/20200128111224/http://neo4j.com/download/other-releases" target="_top">http://neo4j.com/download/other-releases</a>.
                     </p>
                  </li>
                  <li class="listitem">
                     <p class="simpara">Review Release Notes.</p>
                     <p class="simpara">To view the details of the changes that are included in each version, see the <a class="link" href="../../release-notes" target="_top">Release Notes</a>.
                     </p>
                  </li>
                  <li class="listitem">
                     <p class="simpara">Apply configuration changes.</p>
                     <div class="orderedlist">
                        <ol class="orderedlist" type="a">
                           <li class="listitem">With each version, new configuration settings may be introduced and existing configurations may change.
                              On rare occasions, settings can change name between versions.
                              Any such changes are detailed in the <span class="emphasis"><em>Upgrade guide</em></span>, as mentioned above.
                              Please ensure that you have taken such changes into account.
                           </li>
                           <li class="listitem">It is also useful to inspect the current configuration file and take note of any non-default settings.
                              When upgrading, it is particularly important to note any custom values of the settings <code class="literal"><a class="link" href="../../reference/configuration-settings/#config_dbms.directories.data" title="Table A.112. dbms.directories.data">dbms.directories.data</a></code> and <code class="literal"><a class="link" href="../../reference/configuration-settings/#config_dbms.active_database" title="Table A.94. dbms.active_database">dbms.active_database</a></code>.
                              In cluster installations, pay attention to cluster-specific configuration settings, which may be different on different cluster
                              members.
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li class="listitem">
                     <p class="simpara">Plan index upgrade.</p>
                     <p class="simpara">Review <a class="xref" href="../../performance/index-configuration/" title="10.2. Index configuration">Section&nbsp;10.2, &#8220;Index configuration&#8221;</a> and determine whether you have indexes that ought to be rebuilt in order to take advantage of performance improvements.
                        Include the rebuilding of these indexes in your test upgrade.
                     </p>
                  </li>
                  <li class="listitem">
                     <p class="simpara">Upgrade application code.</p>
                     <p class="simpara">As part of upgrade planning, it is vital to test and potentially update all applications that use Neo4j.
                        How much development time is required to update the code will depend on the particular application.
                     </p>
                     <p class="simpara">In particular, the Cypher language may evolve between Neo4j versions.
                        For backward compatibility, Neo4j provides directives which enable you to explicitly select a previous Cypher language version.
                        This is possible to do globally or for individual statements, as described in the <a href="../../docs/developer-manual/3.4/cypher/deprecations-additions-removals-compatibility/#cypher-compatibility" class="olink">Neo4j Developer Manual</a>.
                     </p>
                  </li>
                  <li class="listitem">
                     <p class="simpara">Upgrade custom plugins.</p>
                     <p class="simpara">Check the <span class="emphasis"><em>plugins</em></span> directory (see <a class="xref" href="../../configuration/file-locations/" title="3.2. File locations">Section&nbsp;3.2, &#8220;File locations&#8221;</a>) to verify whether custom plugins are used in your deployment.
                        Ensure that any plugins are compatible with Neo4j 3.4.17.
                     </p>
                     <div class="admonitionblock note">
                        <table>
                           <tbody>
                              <tr>
                                 <td class="icon"><i class="fa icon-note" title="note"></i></td>
                                 <td class="content">
                                    <p>Please note that there may be cases where a patch upgrade requires an upgrade of a plugin.
                                       Check with the plugin authors whether this applies to the plugins used in your deployment for this particular version.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </li>
                  <li class="listitem">
                     <p class="simpara">Plan disk space requirements.</p>
                     <p class="simpara">An upgrade requires substantial free disk space, as it makes an entire copy of the database.
                        For the upgrade, make sure to make available an additional ( 50% * size_of(<span class="emphasis"><em>database directory</em></span>), where the default <span class="emphasis"><em>database directory</em></span> is located in: <span class="emphasis"><em><a class="link" href="../../configuration/file-locations/" title="3.2. File locations">data</a>/databases/graph.db</em></span>).
                        In addition to this, do not forget to reserve the disk space needed for the pre-upgrade backup.
                     </p>
                     <p class="simpara">The upgraded database may require slightly larger data files overall.</p>
                  </li>
                  <li class="listitem">
                     <p class="simpara">Perform a test upgrade.</p>
                     <p class="simpara">Based on the findings in this chapter, allocate a test environment for the upgrade and do a test upgrade.
                        The test upgrade will give you valuable information about the time required for the production upgrade, as well as potential
                        additional action points, such as upgrade of plugins and application code.
                     </p>
                  </li>
                  <li class="listitem">
                     <p class="simpara">Review the logs.</p>
                     <p class="simpara">The <a class="link" href="../../configuration/file-locations/#file-locations-log-files" title="3.2.2. Log files"><span class="emphasis"><em>neo4j.log</em></span></a> file contains valuable information on how many steps the upgrade will involve and how far it has progressed.
                        For large upgrades, it is a good idea to monitor this log continuously.
                        Below is a sample of what the log may look like:
                     </p><pre class="screen highlight"><code>2018-09-18 13:24:23.243+0000 INFO  Starting...
2018-09-18 13:24:24.262+0000 INFO  Initiating metrics...
2018-09-18 13:24:24.488+0000 INFO  Starting upgrade of database
2018-09-18 13:24:24.538+0000 INFO  Migrating Indexes (1/5):
2018-09-18 13:24:24.542+0000 INFO    10% completed
2018-09-18 13:24:24.543+0000 INFO    20% completed
2018-09-18 13:24:24.543+0000 INFO    30% completed
...
...
...
2018-09-18 13:24:24.574+0000 INFO  Migrating Counts store (5/5):
2018-09-18 13:24:24.574+0000 INFO    10% completed
2018-09-18 13:24:24.574+0000 INFO    20% completed
2018-09-18 13:24:24.575+0000 INFO    30% completed
...
...
...
2018-09-18 13:24:24.576+0000 INFO    100% completed
2018-09-18 13:24:24.584+0000 INFO  Successfully finished upgrade of database</code></pre></li>
               </ol>
            </div>
         </section>
         <section class="section" id="_additional_resources">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a class="anchor" href="#_additional_resources"></a>5.1.3.&nbsp;Additional resources
                     </h3>
                  </div>
               </div>
            </div>
            <p>In addition to the steps outlined in this chapter, it is valuable to review the <a class="link" href="../../guides/upgrade/" target="_top"><span class="emphasis"><em>Upgrade guide</em></span> at neo4j.com</a>.
               The upgrade guide is  maintained by Neo4j Customer Support, and contains valuable information about upgrade actions particular
               to this release.
            </p>
         </section>
      </section>
      <footer><script type="text/javascript">
        </script><script type="text/javascript">
        </script><script>;</script></footer>
   </body>
</html><!--
     FILE ARCHIVED ON 11:12:24 Jan 28, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 15:35:23 Jul 04, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
-->